load("@bazel_skylib//:bzl_library.bzl", "bzl_library")

filegroup(
    name = "all_files",
    srcs = glob(["**"]),
    visibility = ["//img/private/release:__subpackages__"],
)

bzl_library(
    name = "pull",
    srcs = ["pull.bzl"],
    visibility = ["//img:__subpackages__"],
    deps = [
        ":download",
        ":registry",
        "//img/private:manifest_media_type",
        "//img/private/platforms",
        "//img/private/platforms:constraints",
        "@bazel_skylib//lib:sets",
        "@pull_hub_repo//:defs",
    ],
)

bzl_library(
    name = "pull_blob",
    srcs = ["pull_blob.bzl"],
    visibility = ["//img:__subpackages__"],
    deps = [
        ":download",
        "@pull_hub_repo//:defs",
    ],
)

bzl_library(
    name = "download",
    srcs = ["download.bzl"],
    visibility = ["//img:__subpackages__"],
    deps = [
        ":registry",
        "@pull_hub_repo//:defs",
    ],
)

bzl_library(
    name = "image_repo",
    srcs = ["image_repo.bzl"],
    visibility = ["//img:__subpackages__"],
    deps = [
        "//img/private/platforms",
        "//img/private/platforms:constraints",
        "@bazel_skylib//lib:sets",
    ],
)

bzl_library(
    name = "registry",
    srcs = ["registry.bzl"],
    visibility = ["//img:__subpackages__"],
)

bzl_library(
    name = "toolchains_repo",
    srcs = ["toolchains_repo.bzl"],
    visibility = ["//img:__subpackages__"],
)
