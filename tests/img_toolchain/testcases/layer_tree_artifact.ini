[test]
name = layer_tree_artifact
description = Test layer creation with tree artifacts (directories)

[file]
name = mydir/file1.txt
content for file 1

[file]
name = mydir/file2.txt
content for file 2

[file]
name = mydir/subdir/file3.txt
content for file 3

[testdata]
copy = add_files=img_toolchain/layer_tree_artifact/add_files

[command]
subcommand = layer
args = --add-from-file add_files --metadata layer_meta.json layer.tar.gz
expect_exit = 0

[assert]
file_exists = layer.tar.gz
file_size_gt = layer.tar.gz, 0
layer_invariants_intact = layer.tar.gz
