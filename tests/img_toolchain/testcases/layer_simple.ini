[test]
name = layer_simple
description = Test layer creation with a simple file

[file]
name = hello.txt
Hello World

[command]
subcommand = layer
args = --add /hello.txt=hello.txt layer.tar.gz
expect_exit = 0

[assert]
file_exists = layer.tar.gz
file_size_gt = layer.tar.gz, 0
file_sha256 = layer.tar.gz, "a6b1c77c360541b7064f34168ad60bde98e1483e0aa3e54903b8c53b8f5c6c18"
tar_entry_exists = layer.tar.gz, hello.txt
tar_entry_type = layer.tar.gz, hello.txt, link
tar_entry_exists = layer.tar.gz, .cas/blob/a591a6d40bf420404a011733cfb7b190d62c65bf0bcda32b57b277d9ad9f146e
tar_entry_type = layer.tar.gz, .cas/blob/a591a6d40bf420404a011733cfb7b190d62c65bf0bcda32b57b277d9ad9f146e, regular
tar_entry_size = layer.tar.gz, .cas/blob/a591a6d40bf420404a011733cfb7b190d62c65bf0bcda32b57b277d9ad9f146e, 11
tar_entry_sha256 = layer.tar.gz, .cas/blob/a591a6d40bf420404a011733cfb7b190d62c65bf0bcda32b57b277d9ad9f146e, "a591a6d40bf420404a011733cfb7b190d62c65bf0bcda32b57b277d9ad9f146e"
