[test]
name = layer_unused_metadata_single_error
description = Test that layer command errors with correct message for single unused file metadata

[file]
name = test.txt
Hello World

[command]
subcommand = layer
args = --file-metadata nonexistent/file.txt={"mode":"0644"} --add test.txt=test.txt layer.tgz
expect_exit = 1
expect_stderr_contains = unused file metadata for path: nonexistent/file.txt

[assert]
file_exists = layer.tgz
