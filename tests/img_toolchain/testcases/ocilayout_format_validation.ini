[test]
name = ocilayout_format_validation
description = OCI layout format validation - should fail with invalid format

[file]
name = manifest.json
{
  "schemaVersion": 2,
  "mediaType": "application/vnd.oci.image.manifest.v1+json",
  "config": {
    "mediaType": "application/vnd.oci.image.config.v1+json",
    "size": 1469,
    "digest": "sha256:b5b2b2c5072406148de34c2e87b1b0d4e98a8e99e4b1a4d8b48adf2e07f9b2c5"
  },
  "layers": []
}

[file]
name = config.json
{
  "architecture": "amd64",
  "os": "linux"
}

[command]
subcommand = oci-layout
args = --manifest manifest.json --config config.json --format invalid --output oci-output
expect_exit = 1

[assert]
stderr_contains = --format must be 'directory' or 'tar', got 'invalid'
