[test]
name = manifest_with_ubuntu_testdata
description = Test manifest creation using real Ubuntu config and manifest from testdata

[testdata]
copy = ubuntu_config.json=ubuntu/config
copy = ubuntu_manifest.json=ubuntu/manifest

[command]
subcommand = manifest
args = --base-config ubuntu_config.json --base-manifest ubuntu_manifest.json --manifest processed_manifest.json --config processed_config.json
expect_exit = 0

[assert]
file_exists = processed_manifest.json
file_exists = processed_config.json
file_valid_json = processed_manifest.json
file_valid_json = processed_config.json
json_field_exists = processed_manifest.json, schemaVersion
json_field_exists = processed_manifest.json, mediaType
json_field_exists = processed_config.json, architecture
