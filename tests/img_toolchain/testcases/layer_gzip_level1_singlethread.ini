[test]
name = layer_gzip_level1_singlethread
description = Create a gzip layer using single-threaded stdlib gzip with low compression level

[file]
name = small.txt
Small content for gzip level test

[command]
subcommand = layer
args = --add /small.txt=small.txt --format gzip --compressor-jobs 1 --compression-level 1 --metadata layer_meta.json layer.tgz
expect_exit = 0

[assert]
file_exists = layer.tgz
file_valid_gzip = layer.tgz
file_exists = layer_meta.json
file_valid_json = layer_meta.json
file_contains = layer_meta.json, "tar+gzip"
tar_entry_exists = layer.tgz, small.txt
tar_entry_type = layer.tgz, small.txt, link
