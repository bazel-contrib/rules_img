[test]
name = layer_with_ubuntu_blobs
description = Test layer operations using Ubuntu blob data from testdata

[testdata]
copy = test_blob=ubuntu/blobs/sha256/602eb6fb314b5fafad376a32ab55194e535e533dec6552f82b70d7ac0e554b1c

[command]
subcommand = layer
args = --add /test_blob=test_blob --metadata layer_metadata.json test_layer.tar.gz
expect_exit = 0

[assert]
file_exists = test_layer.tar.gz
file_exists = layer_metadata.json
file_valid_gzip = test_layer.tar.gz
file_valid_json = layer_metadata.json
file_size_gt = test_layer.tar.gz, 500
json_field_exists = layer_metadata.json, digest
json_field_exists = layer_metadata.json, size
json_field_exists = layer_metadata.json, mediaType
